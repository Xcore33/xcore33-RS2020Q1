<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>RSS Presentation Xcore33</title>
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/reveal.css">
  <link rel="stylesheet" href="css/theme/black.css">
  <link rel="stylesheet" href="/css/style.css">



  <!-- Theme used for syntax highlighting of code -->
  <link rel="stylesheet" href="lib/css/monokai.css">

  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
    document.getElementsByTagName('head')[0].appendChild(link);
  </script>
</head>

<body>
  <div class="reveal">
    <div class="slides">
      <section>
        <section>
          <h1>History API and Routing</h1>
          <img src="/img/js_logo.png">
        </section>
      </section>
      <section>
        <section>
          <h4>Why do we need History API?</h4>
          <img src="/img/different-page-states.jpg">
        </section>
        <section>
          <h4>A Quick History</h4>
          <div class="text-container">
            <img src="/img/twitter_api.png">
          </div>
        </section>
        <section>
          <h4>Basic concepts</h4>
          <div class="bigger-box left">The History interface allows manipulation of the browser session history, that is
            the pages visited in the tab or frame that the current page is loaded in.

          </div>
          <pre><code>window.history;</code></pre>
          <div class="medium-box">
            <pre><code>History {length: 2, scrollRestoration: "auto", state: null}
            length: 2
            scrollRestoration: "auto"
            state: null
            __proto__: History
            back: ƒ back()
            forward: ƒ forward()
            go: ƒ go()
            length: (...)
            pushState: ƒ pushState()
            replaceState: ƒ replaceState()
            state: (...)
            constructor: ƒ History()
            __proto__: Object</code></pre>
            These are the methods available to us
            to manipulate the browser's history. <br>State object includes the data we'll need if the state of the web
            page changes.
          </div>
        </section>
        <section>
          <h4>Traveling through history</h4>
          <img src="/img/back forfard.png" alt="" height="220">
          <div class="medium-box">
          <div class="box"><img src="img/left.png" alt="" width="35px" height="35px">
            <pre><code>window.history.back(); </code>To move backward through history</pre>
          </div>
          <div class="box"><img class="mirror" src="img/left.png" alt="" width="35px" height="35px">
            <pre><code>window.history.forward();</code>To move forward through history </pre>
          </div>
          <pre
            class="pre_width"><code class="no_width">window.history.go(n);</code>Moving to a specific point in history</pre>
            <pre
            class="pre_width"><code class="no_width">window.history.lenght;</code>Returns the number of entries in the joint session history</pre>
          </div>
        </section>
        <section>
          <h4>Modefying history</h4>
          <img src="/img/push.png" height="240">
          <div class="medium-box">In HTML5 we have pushState and replaceState methods:</div>
          <pre><code>1 window.history.replaceState([stateObj], [title], [url]); </code></pre>
          <div class="small-box">
            method modifies the current history entry, replacing it with the stateObj, title, and URL passed in the
            method parameters. This method is particularly useful when you want to update the state object or URL of the
            current history entry in response to some user action.</div>
          <pre><code>2 window.history.pushState([stateObj], [title], [url]); </code></pre>
          <div class="small-box">
            method adds a state to the browser's session history stack.</div>
        </section>
        <section>
          <div class="medium-box">
            <h3>Short examle</h3>
            <i><span>history.</span>replaceState()</i> operates exactly like <i><span>history.</span>pushState()</i>
            except that <i>replaceState()</i> modifies the
            current history entry instead of creating a new one. <br>
            <img src="/img/push-vs-replace-state.jpg" alt=""> <br>
            We have several blocks located on the stack called 1 and 2. We also have block 3.
            The <i>pushState</i> command pushes block 3 onto an existing stack. As a result, it will have 3 blocks.
            When the <i>replaceState</i> function is executed, block 2 will be replaced by block 3. Thus, the number of
            blocks
            will remain the same.
          </div>
        </section>
      </section>
      <section>
        <section>
          <h2>ROUTING</h2><br>
          Router is one of the must-have parts of single page application.
        </section>
        <section>
          <h3>Methods of routing</h3><br>
          <li>Hash-based routing</li>
          <li>Routing with pushState</li>
        </section>
        <section>
          <div class="small-box">
            <h3>Hash-based routing</h3>
            What we meant by hash-based routing is using the anchor part of the URL to simulate different content <br>
            <img src="img/rev1.png" alt="" height="35"><br>
            The routing is possible because changes in the hash don’t trigger page reload. <br><br>
            <h3>Reading the route</h3>
            To read the anchor bit from the URL we may use the following code <br>
            <pre><code>var hash = window.location.hash.slice(1);

            // or extracting the hash from the entire URL
            var hash = window.location.href.split('#')[1] || '';</code></pre>
            <h3>Changing the path</h3>
            To change path we may use the following code <br>
            <div class="bigger-box">
              <pre><code>ar navigate = function (path) {
            var current = window.location.href;
            window.location.href = current.replace(/#(.*)$/, '') + '#' + path;
          }

          navigate('rolling-scopes');</code></pre>
            </div>
            <img src="img/rev2.png" alt="" height="35">
          </div>
        </section>
        <section>
          <h3>A routing revolution with pushState</h3>
          Now we do not need to use a #. We use a pushState() method to manipulate the history of the browser.<br>
          <pre><code>var stateObj = { foo: "bar" };
            history.pushState(stateObj, "page 2", "bar.html");</code></pre>
        </section>
        <section>
          <h3>DEMO</h3><br>
          <video class="wrap" src="/img/Example.mp4" controls="controls" frameborder="0" allowfullscreen="" height="500"
            autoplay loop></video>
        </section>
        <section> <h3>The markup for this example:</h3>
          <div class="small-box example">
            <div class="boxes">
            <pre><a class="big">HTML</a><code>
              <div class="gallery">
              <a href="/peter.html">
                <img src="bill.png" alt="Peter" class="peter" data-name="peter">
              </a>
              <a href="/ray.html">
                <img src="ray.png" alt="Ray" class="ray" data-name="ray">
              </a>
              <a href="/egon.html">
                <img src="egon.png" alt="Egon" class="egon" data-name="egon">
              </a>
              <a href="/winston.html">
                <img src="winston.png" alt="Winston" class="winston" data-name="winston">
              </a>
            </div>

            <p class="selected">Ghostbusters</p>
            <p class="highlight"></p>

            <div class="content"></div></code></pre></div>
            <div class="boxes">
            <pre><a class="big">JS</a><code>
              var data = e.target.getAttribute('data-name'),
              url = data + ".html";
              history.pushState(null, null, url);
              // here we can fix the current classes
              // and update text with the data variable
              // and make an Ajax request for the .content element
              // finally we can manually update the document’s title

              var container = document.querySelector('.gallery');

              container.addEventListener('click', function(e) {
                if (e.target != e.currentTarget) {
                  e.preventDefault();
                  // e.target is the image inside the link we just clicked.
                }
                e.stopPropagation();
              }, false);

              history.pushState(data, null, url);

              window.addEventListener('popstate', function(e) {
                // e.state is equal to the data-attribute of the last image we clicked
              });


              function requestContent(file) {
                $('.content').load(file + ' .content');
              }

              window.addEventListener('popstate', function(e) {
                var character = e.state;

                if (character == null) {
                  removeCurrentClass();
                  textWrapper.innerHTML = " ";
                  content.innerHTML = " ";
                  document.title = defaultTitle;
                } else {
                    updateText(character);
                    requestContent(character + ".html");
                    addCurrentClass(character);
                    document.title = "Ghostbuster | " + character;
                }
              });
            </code></pre></div>
        </section>
        <section> <h2>CONCLUSION</h2><br>
          As a summary I would like to say that with HTML 5 history API our application to look & act like
          proper, server-rendered sites as much as possible, especially with minimal effort.</section>
      </section>
    </div>
  </div>

  <script src="js/reveal.js"></script>

  <script>
    // More info about config & dependencies:
    // - https://github.com/hakimel/reveal.js#configuration
    // - https://github.com/hakimel/reveal.js#dependencies
    Reveal.initialize({
      hash: true,
      dependencies: [
        { src: 'plugin/markdown/marked.js' },
        { src: 'plugin/markdown/markdown.js' },
        { src: 'plugin/highlight/highlight.js' },
        { src: 'plugin/notes/notes.js', async: true }
      ]
    });
  </script>
</body>

</html>
